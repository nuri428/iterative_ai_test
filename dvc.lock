schema: '2.0'
stages:
  preprocess:
    cmd: poetry run python 1.preprocessing.py ./data/sentiment_tagged_data ./data/sentiment_train_data
    deps:
    - path: ./data/sentiment_tagged_data
      hash: md5
      md5: f6f592279c145befca5fb24e47927647.dir
      size: 11498215
      nfiles: 105
    - path: 1.preprocessing.py
      hash: md5
      md5: 588099858531814e476826d17dff3797
      size: 1340
    outs:
    - path: ./data/sentiment_train_data/datasets.json
      hash: md5
      md5: d5ef4e5f8f6efdaa1670f4e8d779dde1
      size: 7003622
  data_split:
    cmd: python 2.data_split.py ./data/sentiment_preprocessed/preprocessed.json ./data/sentiment_train_data/
    deps:
    - path: ./data/sentiment_preprocessed/preprocessed.json
      hash: md5
      md5: aab175e4ff3e55313448647c749a562f
      size: 7142958
    outs:
    - path: ./data/sentiment_train_data/test.json
      hash: md5
      md5: b77b1d04521fbb9082e9af9dbc885a75
      size: 1787695
    - path: ./data/sentiment_train_data/train.json
      hash: md5
      md5: f15ddd4390a41a9558b2644b8f6fa22e
      size: 5355264
  train:
    cmd: python 3.train.py
    deps:
    - path: ./data/sentiment_train_data/datasets.json
      hash: md5
      md5: d5ef4e5f8f6efdaa1670f4e8d779dde1
      size: 7003622
    - path: 3.train.py
      hash: md5
      md5: 026c13f56605ec1efae871fffc7507a0
      size: 3327
    - path: params.py
      hash: md5
      md5: 7d0d4b1ad666235bb8a506d3bb4ab8dc
      size: 273
    params:
      params.py:
        MODEL: distilbert-base-uncased
        TRAINED_MODEL: sentiment_classification
        TrainConfig.BATCH_SIZE: 16
        TrainConfig.EPOCHS: 10
        TrainConfig.LEARNING_RATE: 3e-05
        TrainConfig.PER_DEVICE_EVAL_BATCH_SIZE: 16
        TrainConfig.PER_DEVICE_TRAIN_BATCH_SIZE: 16
        TrainConfig.WEIGHT_DECAY: 0.01
